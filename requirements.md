# リアルタイム音声文字起こしWebアプリケーション要件定義書

## 1. プロジェクト概要
マイクから入力された音声をリアルタイムで文字起こしするブラウザベースのアプリケーション

### 1.1 目的
- 録音ボタンを押すだけで音声をリアルタイムに文字変換
- 音声ファイルの保存は不要、テキストのみ取得
- 完全無料、インストール不要

## 2. 機能要件

### 2.1 コア機能
- **音声入力**
  - 録音開始/停止ボタン
  - マイクアクセス許可の取得
  - 録音中の視覚的フィードバック（録音インジケーター）

- **リアルタイム文字起こし**
  - Web Speech API（SpeechRecognition）使用
  - 目標精度: 90%以上（以下の条件下）
    - 静かな環境
    - 明瞭な発話
    - 標準的な日本語
    - 適切な話速
  - 連続認識モード対応
  - 中間結果と確定結果の区別表示

- **テキスト管理**
  - 文字起こし結果の表示
  - セッション管理（複数の録音セッションを分けて表示）
  - 全クリア機能

### 2.2 精度向上のための機能
- **認識設定**
  - continuous: true（連続認識）
  - interimResults: true（中間結果表示）
  - maxAlternatives: 1
  - lang: 'ja-JP'（日本語固定）

- **ユーザー補助機能**
  - 認識された文字の信頼度表示（可能な場合）
  - 誤認識しやすい単語のハイライト
  - 文字起こし後の編集機能

### 2.3 エクスポート機能
- **ダウンロード形式**
  - TXT（プレーンテキスト）
  - DOCX（Word文書）
  - PDF
  - JSON（タイムスタンプ付き）
  - クリップボードへのコピー

### 2.4 編集機能
- **テキスト編集**
  - 文字起こし後の手動編集
  - 削除/追加/修正
  - 検索・置換
  - よく使う単語の辞書登録（ローカルストレージ）

## 3. ユーザーインターフェース

### 3.1 レイアウト
```
┌─────────────────────────────────┐
│     🎤 音声文字起こしツール      │ ⚙️
├─────────────────────────────────┤
│                                 │
│      [●] 録音開始               │
│     録音時間: 00:00             │
│     状態: 待機中                │
│                                 │
├─────────────────────────────────┤
│   文字起こし結果:               │
│   ┌─────────────────────────┐  │
│   │ （ここに文字が表示）      │  │
│   │                         │  │
│   │ 灰色: 認識中            │  │
│   │ 黒色: 確定済み          │  │
│   └─────────────────────────┘  │
├─────────────────────────────────┤
│ [📋コピー] [💾TXT] [📄DOCX] [📑PDF] │
│ [🗑️クリア] [➕新規セッション]    │
└─────────────────────────────────┘
```

### 3.2 使用上の注意事項（UI内に表示）
- 静かな環境でご利用ください
- はっきりと話してください
- 専門用語は認識率が下がる可能性があります
- 長時間の使用時は定期的に保存してください

## 4. 技術仕様

### 4.1 使用技術
- **HTML5**: 構造
- **CSS3**: スタイリング（アニメーション含む）
- **JavaScript**: ロジック
- **Web Speech API**: 音声認識
- **MediaStream API**: マイクアクセス
- **LocalStorage**: ユーザー設定保存

### 4.2 対応ブラウザ
- Chrome 25+（推奨）
- Edge 79+
- Safari 14.1+（macOS/iOS）
- Opera 27+
- Firefox（非対応のため代替メッセージ表示）

### 4.3 音声認識の実装詳細
```javascript
// 基本設定例
recognition.continuous = true;
recognition.interimResults = true;
recognition.lang = 'ja-JP';

// エラーハンドリング
- no-speech: 音声が検出されない
- audio-capture: マイクエラー
- not-allowed: 許可されていない
- network: ネットワークエラー
```

## 5. 制約事項と対策
- **制約**: 約60秒で自動停止（ブラウザ仕様）
  - **対策**: 自動再開機能の実装
- **制約**: ネットワーク依存
  - **対策**: オフライン検出と警告表示
- **制約**: 同音異義語の誤認識
  - **対策**: 編集機能で修正可能

## 6. デザイン指針
- **視認性**: 大きな文字、高コントラスト
- **フィードバック**: 録音中の明確な表示
- **エラー表示**: 分かりやすいエラーメッセージ
- **モバイル対応**: タッチ操作最適化

## 7. パフォーマンス目標
- 音声入力から文字表示まで: 1秒以内
- 中間結果の更新: 200ms以内
- エクスポート処理: 3秒以内（10,000文字）